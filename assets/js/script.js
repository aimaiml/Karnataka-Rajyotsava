// Language Data
const languageData = {
    en: {
        navHome: "Home",
        navCompetitions: "Competitions",
        navRegister: "Register",
        navSchedule: "Schedule",
        navResults: "Results",
        heroTitle: "Department Level<br>Talent Screening",
        heroSubtitle: "Bagalkot Habba 2025",
        heroDescription: "BVV Sangha's 119th Establishment Year Celebration<br><strong>Internal Selection Process</strong>",
        registerNow: "Register Now",
        viewCategories: "View Categories",
        countdownTitle: "Screening Deadline",
        deadlineText: "Internal Screening: October 21-30, 2025",
        days: "Days",
        hours: "Hours",
        minutes: "Minutes",
        seconds: "Seconds",
        langToggle: "‡≤ï‡≤®‡≥ç‡≤®‡≤°",
        purposeTitle: "Why Participate in Department Screening?",
        purposeCard1Title: "Better Preparation",
        purposeCard1Text: "Quality improvement through preliminary rounds",
        purposeCard2Title: "Fair Selection",
        purposeCard2Text: "Transparent evaluation process at department level",
        purposeCard3Title: "Reduced Crowd",
        purposeCard3Text: "Better organized main events with pre-selected talent",
        purposeCard4Title: "Department Pride",
        purposeCard4Text: "Better representation for your department",
        competitionsTitle: "Competition Categories",
        registrationTitle: "Quick Registration",
        registrationSubtitle: "Register for multiple competitions in one go!",
        scheduleTitle: "Important Dates & Schedule",
        resultsTitle: "Results & Updates",
        faqTitle: "Frequently Asked Questions",
        announcementTitle: "Live Announcements",
        selectedCandidatesTitle: "Selected Candidates",
        comingSoon: "Results will be published here after the screening process.",
        screeningInProgress: "Screening in progress...",
        resultsDate: "Results will be announced on November 1, 2025"
    },
    kn: {
        navHome: "‡≤Æ‡≥Å‡≤ñ‡≥ç‡≤Ø",
        navCompetitions: "‡≤∏‡≥ç‡≤™‡≤∞‡≥ç‡≤ß‡≥Ü‡≤ó‡≤≥‡≥Å",
        navRegister: "‡≤®‡≥ã‡≤Ç‡≤¶‡≤£‡≤ø",
        navSchedule: "‡≤µ‡≥á‡≤≥‡≤æ‡≤™‡≤ü‡≥ç‡≤ü‡≤ø",
        navResults: "‡≤´‡≤≤‡≤ø‡≤§‡≤æ‡≤Ç‡≤∂‡≤ó‡≤≥‡≥Å",
        heroTitle: "‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≥Ä‡≤Ø ‡≤Æ‡≤ü‡≥ç‡≤ü‡≤¶<br>‡≤™‡≥ç‡≤∞‡≤§‡≤ø‡≤≠‡≥Ü ‡≤™‡≤∞‡≥Ä‡≤ï‡≥ç‡≤∑‡≥Ü",
        heroSubtitle: "‡≤¨‡≤æ‡≤ó‡≤≤‡≤ï‡≥ã‡≤ü‡≥Ü ‡≤π‡≤¨‡≥ç‡≤¨ 2025",
        heroDescription: "‡≤¨‡≤ø.‡≤µ‡≤ø.‡≤µ‡≤ø ‡≤∏‡≤Ç‡≤ò‡≤¶ 119‡≤®‡≥á ‡≤∏‡≥ç‡≤•‡≤æ‡≤™‡≤®‡≤æ ‡≤µ‡≤∞‡≥ç‡≤∑‡≤¶ ‡≤Ü‡≤ö‡≤∞‡≤£‡≥Ü<br><strong>‡≤Ü‡≤Ç‡≤§‡≤∞‡≤ø‡≤ï ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü ‡≤™‡≥ç‡≤∞‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≥Ü</strong>",
        registerNow: "‡≤à‡≤ó ‡≤®‡≥ã‡≤Ç‡≤¶‡≤£‡≤ø ‡≤Æ‡≤æ‡≤°‡≤ø",
        viewCategories: "‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤µ‡≥Ä‡≤ï‡≥ç‡≤∑‡≤ø‡≤∏‡≤ø",
        countdownTitle: "‡≤™‡≤∞‡≥Ä‡≤ï‡≥ç‡≤∑‡≥Ü‡≤Ø ‡≤ï‡≥ä‡≤®‡≥Ü‡≤Ø ‡≤¶‡≤ø‡≤®‡≤æ‡≤Ç‡≤ï",
        deadlineText: "‡≤Ü‡≤Ç‡≤§‡≤∞‡≤ø‡≤ï ‡≤™‡≤∞‡≥Ä‡≤ï‡≥ç‡≤∑‡≥Ü: ‡≤Ö‡≤ï‡≥ç‡≤ü‡≥ã‡≤¨‡≤∞‡≥ç 21-30, 2025",
        days: "‡≤¶‡≤ø‡≤®‡≤ó‡≤≥‡≥Å",
        hours: "‡≤ó‡≤Ç‡≤ü‡≥Ü‡≤ó‡≤≥‡≥Å", 
        minutes: "‡≤®‡≤ø‡≤Æ‡≤ø‡≤∑‡≤ó‡≤≥‡≥Å",
        seconds: "‡≤∏‡≥Ü‡≤ï‡≥Ü‡≤Ç‡≤°‡≥Å‡≤ó‡≤≥‡≥Å",
        langToggle: "English",
        purposeTitle: "‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≥Ä‡≤Ø ‡≤™‡≤∞‡≥Ä‡≤ï‡≥ç‡≤∑‡≥Ü‡≤Ø‡≤≤‡≥ç‡≤≤‡≤ø ‡≤è‡≤ï‡≥Ü ‡≤≠‡≤æ‡≤ó‡≤µ‡≤π‡≤ø‡≤∏‡≤¨‡≥á‡≤ï‡≥Å?",
        purposeCard1Title: "‡≤â‡≤§‡≥ç‡≤§‡≤Æ ‡≤§‡≤Ø‡≤æ‡≤∞‡≤ø",
        purposeCard1Text: "‡≤™‡≥ç‡≤∞‡≤æ‡≤•‡≤Æ‡≤ø‡≤ï ‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≥Å‡≤ó‡≤≥ ‡≤Æ‡≥Ç‡≤≤‡≤ï ‡≤ó‡≥Å‡≤£‡≤Æ‡≤ü‡≥ç‡≤ü ‡≤∏‡≥Å‡≤ß‡≤æ‡≤∞‡≤£‡≥Ü",
        purposeCard2Title: "‡≤®‡≥ç‡≤Ø‡≤æ‡≤Ø‡≤Ø‡≥Å‡≤§ ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü",
        purposeCard2Text: "‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≥Ä‡≤Ø ‡≤Æ‡≤ü‡≥ç‡≤ü‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤™‡≤æ‡≤∞‡≤¶‡≤∞‡≥ç‡≤∂‡≤ï ‡≤Æ‡≥å‡≤≤‡≥ç‡≤Ø‡≤Æ‡≤æ‡≤™‡≤® ‡≤™‡≥ç‡≤∞‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≥Ü",
        purposeCard3Title: "‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü ‡≤ó‡≤¶‡≥ç‡≤¶‡≤≤",
        purposeCard3Text: "‡≤Æ‡≥Å‡≤Ç‡≤ö‡≥Ç‡≤£‡≤ø ‡≤™‡≥ç‡≤∞‡≤§‡≤ø‡≤≠‡≥Ü‡≤ó‡≤≥‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤â‡≤§‡≥ç‡≤§‡≤Æ‡≤µ‡≤æ‡≤ó‡≤ø ‡≤Ü‡≤Ø‡≥ã‡≤ú‡≤ø‡≤§ ‡≤Æ‡≥Å‡≤ñ‡≥ç‡≤Ø ‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø‡≤ï‡≥ç‡≤∞‡≤Æ‡≤ó‡≤≥‡≥Å",
        purposeCard4Title: "‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≤¶ ‡≤π‡≥Ü‡≤Æ‡≥ç‡≤Æ‡≥Ü",
        purposeCard4Text: "‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤â‡≤§‡≥ç‡≤§‡≤Æ ‡≤™‡≥ç‡≤∞‡≤æ‡≤§‡≤ø‡≤®‡≤ø‡≤ß‡≥ç‡≤Ø",
        competitionsTitle: "‡≤∏‡≥ç‡≤™‡≤∞‡≥ç‡≤ß‡≥Ü‡≤Ø ‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≤ó‡≤≥‡≥Å",
        registrationTitle: "‡≤§‡≥ç‡≤µ‡≤∞‡≤ø‡≤§ ‡≤®‡≥ã‡≤Ç‡≤¶‡≤£‡≤ø",
        registrationSubtitle: "‡≤í‡≤Ç‡≤¶‡≥á ‡≤∏‡≤≤‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤Ö‡≤®‡≥á‡≤ï ‡≤∏‡≥ç‡≤™‡≤∞‡≥ç‡≤ß‡≥Ü‡≤ó‡≤≥‡≤ø‡≤ó‡≥Ü ‡≤®‡≥ã‡≤Ç‡≤¶‡≤£‡≤ø ‡≤Æ‡≤æ‡≤°‡≤ø!",
        scheduleTitle: "‡≤™‡≥ç‡≤∞‡≤Æ‡≥Å‡≤ñ ‡≤¶‡≤ø‡≤®‡≤æ‡≤Ç‡≤ï‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤µ‡≥á‡≤≥‡≤æ‡≤™‡≤ü‡≥ç‡≤ü‡≤ø",
        resultsTitle: "‡≤´‡≤≤‡≤ø‡≤§‡≤æ‡≤Ç‡≤∂‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Ö‡≤™‡≥ç‚Äå‡≤°‡≥á‡≤ü‡≥ç‚Äå‡≤ó‡≤≥‡≥Å",
        faqTitle: "‡≤Ü‡≤ó‡≤æ‡≤ó‡≥ç‡≤ó‡≥Ü ‡≤ï‡≥á‡≤≥‡≤≤‡≤æ‡≤ó‡≥Å‡≤µ ‡≤™‡≥ç‡≤∞‡≤∂‡≥ç‡≤®‡≥Ü‡≤ó‡≤≥‡≥Å",
        announcementTitle: "‡≤®‡≥á‡≤∞ ‡≤™‡≥ç‡≤∞‡≤ï‡≤ü‡≤£‡≥Ü‡≤ó‡≤≥‡≥Å",
        selectedCandidatesTitle: "‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Ø‡≤æ‡≤¶ ‡≤Ö‡≤≠‡≥ç‡≤Ø‡≤∞‡≥ç‡≤•‡≤ø‡≤ó‡≤≥‡≥Å",
        comingSoon: "‡≤™‡≤∞‡≥Ä‡≤ï‡≥ç‡≤∑‡≤æ ‡≤™‡≥ç‡≤∞‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≥Ü‡≤Ø ‡≤®‡≤Ç‡≤§‡≤∞ ‡≤á‡≤≤‡≥ç‡≤≤‡≤ø ‡≤´‡≤≤‡≤ø‡≤§‡≤æ‡≤Ç‡≤∂‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≥ç‡≤∞‡≤ï‡≤ü‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å.",
        screeningInProgress: "‡≤™‡≤∞‡≥Ä‡≤ï‡≥ç‡≤∑‡≥Ü ‡≤®‡≤°‡≥Ü‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥Ü...",
        resultsDate: "‡≤®‡≤µ‡≥Ü‡≤Ç‡≤¨‡≤∞‡≥ç 1, 2025 ‡≤∞‡≤Ç‡≤¶‡≥Å ‡≤´‡≤≤‡≤ø‡≤§‡≤æ‡≤Ç‡≤∂‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤ò‡≥ã‡≤∑‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å"
    }
};

// Global Variables
let currentLanguage = 'en';
let countdownInterval;

// DOM Content Loaded
document.addEventListener('DOMContentLoaded', function() {
    initializeWebsite();
    checkFontAwesome();
});

// Check if Font Awesome is loaded
function checkFontAwesome() {
    // Wait a bit for Font Awesome to load
    setTimeout(() => {
        const testElement = document.createElement('i');
        testElement.className = 'fas fa-home';
        testElement.style.fontFamily = 'Font Awesome 6 Free';
        document.body.appendChild(testElement);
        
        const computedStyle = window.getComputedStyle(testElement);
        const fontFamily = computedStyle.getPropertyValue('font-family');
        
        // Clean up test element
        document.body.removeChild(testElement);
        
        // If Font Awesome didn't load, add fallback
        if (!fontFamily.includes('Font Awesome')) {
            addIconFallbacks();
        }
    }, 1000);
}

// Add fallback text for icons if Font Awesome fails to load
function addIconFallbacks() {
    const iconMappings = {
        'fa-user-plus': 'üë§+',
        'fa-list': 'üìã',
        'fa-language': 'üåê',
        'fa-music': 'üéµ',
        'fa-microphone': 'üé§',
        'fa-pen-fancy': '‚úçÔ∏è',
        'fa-palette': 'üé®',
        'fa-theater-masks': 'üé≠',
        'fa-edit': 'üìù',
        'fa-question-circle': '‚ùì',
        'fa-users': 'üë•',
        'fa-university': 'üè´',
        'fa-trophy': 'üèÜ',
        'fa-arrow-right': '‚Üí',
        'fa-bullseye': 'üéØ',
        'fa-balance-scale': '‚öñÔ∏è',
        'fa-users-cog': 'üë•‚öôÔ∏è',
        'fa-medal': 'üèÖ',
        'fa-clock': '‚è∞',
        'fa-map-marker-alt': 'üìç',
        'fa-star': '‚≠ê',
        'fa-exclamation-circle': '‚ùó',
        'fa-route': 'üõ£Ô∏è',
        'fa-external-link-alt': 'üîó',
        'fa-info-circle': '‚ÑπÔ∏è',
        'fa-phone': 'üìû',
        'fa-envelope': '‚úâÔ∏è',
        'fa-bullhorn': 'üì¢',
        'fa-list-check': '‚úÖ',
        'fa-calendar-clock': 'üìÖ',
        'fa-plus': '+',
        'fa-times': '√ó'
    };
    
    // Find all Font Awesome icons and add fallback text
    document.querySelectorAll('.fas, .far, .fab').forEach(icon => {
        const classes = Array.from(icon.classList);
        const faClass = classes.find(cls => cls.startsWith('fa-'));
        
        if (faClass && iconMappings[faClass]) {
            // Add fallback text as data attribute and style
            icon.setAttribute('data-fallback', iconMappings[faClass]);
            icon.style.fontFamily = 'inherit';
            icon.style.fontSize = '1em';
            
            // Replace content with fallback
            if (icon.textContent.trim() === '') {
                icon.textContent = iconMappings[faClass];
            }
        }
    });
    
    console.warn('Font Awesome not loaded, using fallback icons');
}

// Initialize Website
function initializeWebsite() {
    loadLanguagePreference();
    setupNavigation();
    setupCountdown();
    setupScrollAnimations();
    setupFAQ();
    setupCompetitionModals();
    setupFormValidation();
    loadCompetitionDetails();
}

// Load Language Preference
function loadLanguagePreference() {
    const savedLanguage = localStorage.getItem('preferredLanguage');
    if (savedLanguage && languageData[savedLanguage]) {
        currentLanguage = savedLanguage;
        updateLanguage();
    }
}

// Navigation Setup
function setupNavigation() {
    const hamburger = document.querySelector('.hamburger');
    const navLinks = document.querySelector('.nav-links');
    const navbar = document.querySelector('.navbar');

    // Mobile menu toggle
    hamburger.addEventListener('click', () => {
        navLinks.classList.toggle('active');
        hamburger.classList.toggle('active');
    });

    // Close mobile menu when clicking on links
    document.querySelectorAll('.nav-links a').forEach(link => {
        link.addEventListener('click', () => {
            navLinks.classList.remove('active');
            hamburger.classList.remove('active');
        });
    });

    // Navbar scroll effect
    window.addEventListener('scroll', () => {
        if (window.scrollY > 100) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });

    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
}

// Countdown Timer Setup
function setupCountdown() {
    const deadline = new Date('October 30, 2025 23:59:59').getTime();
    
    countdownInterval = setInterval(() => {
        const now = new Date().getTime();
        const timeLeft = deadline - now;

        if (timeLeft < 0) {
            clearInterval(countdownInterval);
            document.getElementById('countdown').innerHTML = '<div class="expired">Registration Closed</div>';
            return;
        }

        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

        document.getElementById('days').textContent = String(days).padStart(2, '0');
        document.getElementById('hours').textContent = String(hours).padStart(2, '0');
        document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
        document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
    }, 1000);
}

// Scroll Animations
function setupScrollAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('fade-in');
            }
        });
    }, observerOptions);

    // Observe elements for animation
    document.querySelectorAll('.purpose-card, .competition-card, .schedule-card, .faq-item').forEach(el => {
        observer.observe(el);
    });
}

// FAQ Setup
function setupFAQ() {
    document.querySelectorAll('.faq-question').forEach(question => {
        question.addEventListener('click', () => {
            const faqItem = question.closest('.faq-item');
            const isActive = faqItem.classList.contains('active');

            // Close all FAQ items
            document.querySelectorAll('.faq-item').forEach(item => {
                item.classList.remove('active');
            });

            // Open clicked item if it wasn't active
            if (!isActive) {
                faqItem.classList.add('active');
            }
        });
    });
}

// Competition Modals Setup
function setupCompetitionModals() {
    const modal = document.getElementById('competition-modal');
    const closeBtn = document.querySelector('.close');

    closeBtn.addEventListener('click', closeModal);
    
    // Close modal when clicking outside
    window.addEventListener('click', (e) => {
        if (e.target === modal) {
            closeModal();
        }
    });

    // Close modal with Escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.style.display === 'block') {
            closeModal();
        }
    });
}

// Open Competition Modal
function openCompetitionModal(category) {
    const modal = document.getElementById('competition-modal');
    const modalBody = document.getElementById('modal-body');
    
    modalBody.innerHTML = getCompetitionModalContent(category);
    modal.style.display = 'block';
    document.body.style.overflow = 'hidden';
}

// Close Modal
function closeModal() {
    const modal = document.getElementById('competition-modal');
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
}

// Get Competition Modal Content
function getCompetitionModalContent(category) {
    const competitions = {
        dance: {
            title: 'Dance Competition',
            icon: 'fas fa-music',
            categories: ['Classical', 'Semi-classical', 'Folk'],
            format: 'Solo (3-5 min) | Group (5-8 min)',
            criteria: ['Technical skill', 'Expression', 'Costume & makeup', 'Overall presentation'],
            requirements: ['Original or traditional pieces', 'Background music on USB/CD', 'Props if needed'],
            formUrl: 'https://docs.google.com/forms/d/e/1FAIpQLSeeMamiqUv2MbbWSbQd5zV_tAwH1k4r2fPW7EkGnv-oIEoPwQ/viewform?usp=header'
        },
        singing: {
            title: 'Singing Competition',
            icon: 'fas fa-microphone',
            categories: ['Bhavageethe', 'Janapada', 'Classical', 'Semi-classical', 'Light Vocal'],
            format: 'Solo (3-5 min) | Group (5-8 min)',
            criteria: ['Voice quality', 'Sur & Taal', 'Expression', 'Song selection'],
            requirements: ['Karaoke/accompaniment tracks', 'Lyrics sheet', 'No film songs'],
            formUrl: 'https://docs.google.com/forms/d/e/1FAIpQLSeeMamiqUv2MbbWSbQd5zV_tAwH1k4r2fPW7EkGnv-oIEoPwQ/viewform?usp=header'
        },
        drawing: {
            title: 'Drawing Competition (Pictorial)',
            icon: 'fas fa-palette',
            categories: ['Realistic', 'Abstract', 'Cultural themes'],
            format: 'Portfolio submission (Digital/Physical)',
            criteria: ['Artistic skill', 'Creativity', 'Theme interpretation', 'Technical execution'],
            requirements: ['Portfolio of 3-5 works', 'Digital format: High resolution JPG/PNG', 'Physical: A3 size maximum'],
            formUrl: 'https://docs.google.com/forms/d/e/1FAIpQLSeeMamiqUv2MbbWSbQd5zV_tAwH1k4r2fPW7EkGnv-oIEoPwQ/viewform?usp=header'
        },
        skit: {
            title: 'Skit Competition (‡≤®‡≤æ‡≤ü‡≤ï ‡≤∏‡≥ç‡≤™‡≤∞‡≥ç‡≤ß‡≥Ü)',
            icon: 'fas fa-theater-masks',
            categories: ['Cultural themes', 'Social awareness', 'Historical'],
            format: 'Team registration (5-8 members)',
            criteria: ['Script quality', 'Acting skills', 'Direction', 'Message delivery'],
            requirements: ['Script submission for approval', '10-15 minute duration', 'Simple props and costumes'],
            formUrl: 'https://docs.google.com/forms/d/e/1FAIpQLSeeMamiqUv2MbbWSbQd5zV_tAwH1k4r2fPW7EkGnv-oIEoPwQ/viewform?usp=header'
        },
        essay: {
            title: 'Essay Writing Competition',
            icon: 'fas fa-edit',
            categories: ['Descriptive', 'Argumentative', 'Creative'],
            format: 'Individual (500-800 words)',
            criteria: ['Content quality', 'Language & grammar', 'Structure', 'Originality'],
            requirements: ['Topics announced on the day', 'Handwritten essays', 'No external materials'],
            formUrl: 'https://docs.google.com/forms/d/e/1FAIpQLSeeMamiqUv2MbbWSbQd5zV_tAwH1k4r2fPW7EkGnv-oIEoPwQ/viewform?usp=header'
        },
        quiz: {
            title: 'Quiz Competition (‡≤ï‡≥ç‡≤µ‡≤ø‡≤ú‡≥ç ‡≤∏‡≥ç‡≤™‡≤∞‡≥ç‡≤ß‡≥Ü)',
            icon: 'fas fa-question-circle',
            categories: ['General Knowledge', 'Current Affairs', 'Regional History'],
            format: 'Individual/Team (2 members)',
            criteria: ['Accuracy', 'Speed', 'Knowledge breadth', 'Team coordination'],
            requirements: ['Preliminary written round', 'Final oral round', 'Buzzer system for finals'],
            formUrl: 'https://docs.google.com/forms/d/e/1FAIpQLSeeMamiqUv2MbbWSbQd5zV_tAwH1k4r2fPW7EkGnv-oIEoPwQ/viewform?usp=header'
        },
        'kannada-song': {
            title: 'Kavana Vaachana Competition (‡≤ï‡≤µ‡≤® ‡≤µ‡≤æ‡≤ö‡≤® ‡≤∏‡≥ç‡≤™‡≤∞‡≥ç‡≤ß‡≥Ü)',
            icon: 'fas fa-feather-alt',
            categories: ['Original Kannada Poetry', 'Self-composed verses', 'Creative expressions'],
            format: 'Solo performance (3-5 min)',
            criteria: ['Originality', 'Language proficiency', 'Expression & delivery', 'Creative content'],
            requirements: ['Self-made Kavana Vaachana mandatory', 'Original composition only', 'Proper Kannada pronunciation', 'No published works allowed'],
            formUrl: 'https://docs.google.com/forms/d/e/1FAIpQLSeeMamiqUv2MbbWSbQd5zV_tAwH1k4r2fPW7EkGnv-oIEoPwQ/viewform?usp=header'
        }
    };

    const comp = competitions[category];
    if (!comp) return '<p>Competition details not found.</p>';

    return `
        <div class="modal-header" style="background: var(--gradient-primary); color: white; padding: 2rem; text-align: center;">
            <i class="${comp.icon}" style="font-size: 3rem; margin-bottom: 1rem;"></i>
            <h2>${comp.title}</h2>
        </div>
        <div class="modal-body" style="padding: 2rem;">
            <div class="comp-details">
                <div class="detail-section">
                    <h3><i class="fas fa-list"></i> Categories</h3>
                    <ul>
                        ${comp.categories.map(cat => `<li>${cat}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="detail-section">
                    <h3><i class="fas fa-clock"></i> Format</h3>
                    <p>${comp.format}</p>
                </div>
                
                <div class="detail-section">
                    <h3><i class="fas fa-star"></i> Judging Criteria</h3>
                    <ul>
                        ${comp.criteria.map(criterion => `<li>${criterion}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="detail-section">
                    <h3><i class="fas fa-exclamation-circle"></i> Requirements</h3>
                    <ul>
                        ${comp.requirements.map(req => `<li>${req}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="progression-info" style="background: var(--bg-light); padding: 1.5rem; border-radius: 10px; margin: 2rem 0;">
                    <h3><i class="fas fa-route"></i> Selection Process</h3>
                    <div class="process-flow" style="display: flex; align-items: center; gap: 1rem; margin-top: 1rem; flex-wrap: wrap;">
                        <span class="process-step" style="background: var(--primary-color); color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem;">Department Screening</span>
                        <i class="fas fa-arrow-right" style="color: var(--primary-color);"></i>
                        <span class="process-step" style="background: var(--secondary-color); color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem;">College Competition</span>
                        <i class="fas fa-arrow-right" style="color: var(--primary-color);"></i>
                        <span class="process-step" style="background: var(--accent-color); color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem;">Main Event</span>
                    </div>
                </div>
                
                <div class="register-section" style="text-align: center; margin-top: 2rem;">
                    <h3 style="margin-bottom: 1rem;">Ready to Participate?</h3>
                    <a href="${comp.formUrl}" target="_blank" class="btn btn-primary" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 1rem 2rem; background: var(--gradient-primary); color: white; text-decoration: none; border-radius: 50px; font-weight: 600;">
                        <i class="fas fa-external-link-alt"></i>
                        Register for ${comp.title}
                    </a>
                    <p style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.9rem;">
                        <i class="fas fa-info-circle"></i>
                        Registration opens October 15 | Deadline: October 20, 2025
                    </p>
                </div>
            </div>
        </div>
    `;
}

// Form Validation
function setupFormValidation() {
    // This would be implemented when actual Google Forms are integrated
    console.log('Form validation setup complete');
}

// Language Toggle
function toggleLanguage() {
    currentLanguage = currentLanguage === 'en' ? 'kn' : 'en';
    updateLanguage();
}

// Update Language
function updateLanguage() {
    const data = languageData[currentLanguage];
    
    // Update navigation
    const navLinks = document.querySelectorAll('.nav-links a');
    if (navLinks[0]) navLinks[0].textContent = data.navHome;
    if (navLinks[1]) navLinks[1].textContent = data.navCompetitions;
    if (navLinks[2]) navLinks[2].textContent = data.navRegister;
    if (navLinks[3]) navLinks[3].textContent = data.navSchedule;
    if (navLinks[4]) navLinks[4].textContent = data.navResults;
    
    // Update hero section
    const heroTitle = document.querySelector('.hero-title');
    const heroSubtitle = document.querySelector('.hero-subtitle');
    const heroDescription = document.querySelector('.hero-description');
    const btnPrimary = document.querySelector('.btn-primary');
    const btnSecondary = document.querySelector('.btn-secondary');
    
    if (heroTitle) heroTitle.innerHTML = data.heroTitle;
    if (heroSubtitle) heroSubtitle.textContent = data.heroSubtitle;
    if (heroDescription) heroDescription.innerHTML = data.heroDescription;
    if (btnPrimary) btnPrimary.innerHTML = `<i class="fas fa-user-plus"></i> ${data.registerNow}`;
    if (btnSecondary) btnSecondary.innerHTML = `<i class="fas fa-list"></i> ${data.viewCategories}`;
    
    // Update countdown section
    const countdownTitle = document.querySelector('.countdown-section h3');
    const deadlineText = document.querySelector('.deadline-text');
    const timeLabels = document.querySelectorAll('.time-unit label');
    
    if (countdownTitle) countdownTitle.textContent = data.countdownTitle;
    if (deadlineText) deadlineText.textContent = data.deadlineText;
    if (timeLabels[0]) timeLabels[0].textContent = data.days;
    if (timeLabels[1]) timeLabels[1].textContent = data.hours;
    if (timeLabels[2]) timeLabels[2].textContent = data.minutes;
    if (timeLabels[3]) timeLabels[3].textContent = data.seconds;
    
    // Update section titles
    const purposeTitle = document.querySelector('.purpose h2');
    const competitionsTitle = document.querySelector('.competitions h2');
    const registrationTitle = document.querySelector('.registration h2');
    const registrationSubtitle = document.querySelector('.section-subtitle');
    const scheduleTitle = document.querySelector('.schedule h2');
    const resultsTitle = document.querySelector('.results h2');
    const faqTitle = document.querySelector('.faq h2');
    
    if (purposeTitle) purposeTitle.textContent = data.purposeTitle;
    if (competitionsTitle) competitionsTitle.textContent = data.competitionsTitle;
    if (registrationTitle) registrationTitle.textContent = data.registrationTitle;
    if (registrationSubtitle) registrationSubtitle.textContent = data.registrationSubtitle;
    if (scheduleTitle) scheduleTitle.textContent = data.scheduleTitle;
    if (resultsTitle) resultsTitle.textContent = data.resultsTitle;
    if (faqTitle) faqTitle.textContent = data.faqTitle;
    
    // Update purpose cards
    const purposeCards = document.querySelectorAll('.purpose-card');
    if (purposeCards[0]) {
        purposeCards[0].querySelector('h3').textContent = data.purposeCard1Title;
        purposeCards[0].querySelector('p').textContent = data.purposeCard1Text;
    }
    if (purposeCards[1]) {
        purposeCards[1].querySelector('h3').textContent = data.purposeCard2Title;
        purposeCards[1].querySelector('p').textContent = data.purposeCard2Text;
    }
    if (purposeCards[2]) {
        purposeCards[2].querySelector('h3').textContent = data.purposeCard3Title;
        purposeCards[2].querySelector('p').textContent = data.purposeCard3Text;
    }
    if (purposeCards[3]) {
        purposeCards[3].querySelector('h3').textContent = data.purposeCard4Title;
        purposeCards[3].querySelector('p').textContent = data.purposeCard4Text;
    }
    
    // Update results section
    const announcementTitle = document.querySelector('.announcement-board h3');
    const selectedCandidatesTitle = document.querySelector('.selected-candidates h3');
    const comingSoon = document.querySelector('.coming-soon');
    const screeningProgress = document.querySelector('.results-placeholder p:first-of-type');
    const resultsDate = document.querySelector('.results-placeholder p:last-of-type');
    
    if (announcementTitle) {
        announcementTitle.innerHTML = `<i class="fas fa-bullhorn"></i> ${data.announcementTitle}`;
    }
    if (selectedCandidatesTitle) {
        selectedCandidatesTitle.innerHTML = `<i class="fas fa-list-check"></i> ${data.selectedCandidatesTitle}`;
    }
    if (comingSoon) comingSoon.textContent = data.comingSoon;
    if (screeningProgress) screeningProgress.textContent = data.screeningInProgress;
    if (resultsDate) resultsDate.textContent = data.resultsDate;
    
    // Update language toggle button
    const langToggle = document.querySelector('.lang-toggle');
    if (langToggle) {
        langToggle.innerHTML = `<i class="fas fa-language"></i> ${data.langToggle}`;
    }
    
    // Store language preference
    localStorage.setItem('preferredLanguage', currentLanguage);
}

// Load Competition Details
function loadCompetitionDetails() {
    // This function loads additional competition details
    // Could be used to fetch real-time updates from a backend
    console.log('Competition details loaded');
}

// Utility Functions
function showNotification(message, type = 'success') {
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.innerHTML = `
        <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
        <span>${message}</span>
        <button onclick="this.parentElement.remove()">
            <i class="fas fa-times"></i>
        </button>
    `;
    
    notification.style.cssText = `
        position: fixed;
        top: 100px;
        right: 20px;
        background: ${type === 'success' ? 'var(--success-color)' : 'var(--primary-color)'};
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        z-index: 2000;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        animation: slideInRight 0.3s ease;
    `;
    
    document.body.appendChild(notification);
    
    // Auto remove after 5 seconds
    setTimeout(() => {
        if (notification.parentElement) {
            notification.remove();
        }
    }, 5000);
}

function scrollToTop() {
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
}

// Add scroll to top button
function addScrollToTopButton() {
    const button = document.createElement('button');
    button.innerHTML = '<i class="fas fa-arrow-up"></i>';
    button.className = 'scroll-to-top';
    button.onclick = scrollToTop;
    
    button.style.cssText = `
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 50px;
        height: 50px;
        background: var(--gradient-primary);
        color: white;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: var(--shadow);
        z-index: 1000;
        display: none;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        transition: all 0.3s ease;
    `;
    
    document.body.appendChild(button);
    
    // Show/hide scroll to top button
    window.addEventListener('scroll', () => {
        if (window.scrollY > 500) {
            button.style.display = 'flex';
        } else {
            button.style.display = 'none';
        }
    });
}

// Initialize scroll to top button
document.addEventListener('DOMContentLoaded', addScrollToTopButton);

// Performance optimization
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Optimized scroll handler
const optimizedScrollHandler = debounce(() => {
    // Any scroll-based operations can be added here
}, 10);

window.addEventListener('scroll', optimizedScrollHandler);

// Service Worker Registration (for PWA capabilities)
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
            .then((registration) => {
                console.log('SW registered: ', registration);
            })
            .catch((registrationError) => {
                console.log('SW registration failed: ', registrationError);
            });
    });
}

// Error handling
window.addEventListener('error', (event) => {
    console.error('JavaScript Error:', event.error);
    // Could send error reports to analytics service
});

// Accessibility improvements
document.addEventListener('keydown', (e) => {
    // Escape key functionality
    if (e.key === 'Escape') {
        // Close any open modals
        closeModal();
        // Close mobile menu
        document.querySelector('.nav-links').classList.remove('active');
        document.querySelector('.hamburger').classList.remove('active');
    }
});

// Print functionality
function printPage() {
    window.print();
}

// Export functionality for results (when available)
function exportResults(format = 'pdf') {
    showNotification(`Exporting results as ${format.toUpperCase()}...`, 'success');
    // Implementation would depend on backend integration
}

// Google Analytics integration (placeholder)
function trackEvent(category, action, label) {
    if (typeof gtag !== 'undefined') {
        gtag('event', action, {
            event_category: category,
            event_label: label
        });
    }
}

// Track competition registrations
function trackCompetitionRegistration(competition) {
    trackEvent('Registration', 'Competition', competition);
}

// Track page views
function trackPageView(page) {
    trackEvent('Navigation', 'Page View', page);
}

console.log('üé≠ BVV Sangha Department Screening Website Loaded Successfully!');
console.log('üèÜ Ready for 119th Establishment Year Celebration!');

// Add modal styles for competition details
const modalStyles = `
    .detail-section {
        margin-bottom: 2rem;
    }
    .detail-section h3 {
        color: var(--text-primary);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    .detail-section h3 i {
        color: var(--primary-color);
    }
    .detail-section ul {
        list-style: none;
        padding: 0;
    }
    .detail-section li {
        padding: 0.5rem 0;
        padding-left: 1.5rem;
        position: relative;
        color: var(--text-secondary);
    }
    .detail-section li::before {
        content: '‚úì';
        position: absolute;
        left: 0;
        color: var(--success-color);
        font-weight: bold;
    }
`;

// Inject modal styles
const styleSheet = document.createElement('style');
styleSheet.textContent = modalStyles;
document.head.appendChild(styleSheet);